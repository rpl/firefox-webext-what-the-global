(this["webpackJsonpfirefox-webext-what-the-global"]=this["webpackJsonpfirefox-webext-what-the-global"]||[]).push([[0],{210:function(e,a,t){e.exports=t(379)},215:function(e,a,t){},217:function(e,a,t){},379:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),r=t(38),o=t.n(r),c=(t(215),t(178)),i=t(179),s=t(200),u=t(180),m=t(201),d=t(393),h=t(392),f=t(391),E=t(387),p=t(390),g=t(388),b=t(40),v=(t(216),t(217),t(116)),w=t.n(v),y=t(181);function k(){return(k=Object(y.a)(w.a.mark((function e(){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("/firefox-webext-what-the-global","/latest-dump.json")).then((function(e){return e.json()}));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=function(e){function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(c.a)(this,a),(e=Object(s.a)(this,Object(u.a)(a).call(this,t))).searchDebounceTimeout=null,e.state={data:null,error:null,search:"",sorting:{column:"name",direction:"descending"}},e}return Object(m.a)(a,e),Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return k.apply(this,arguments)})().then((function(a){console.log("Fetched data:",a),e.setState({error:null,data:a})}),(function(a){console.error("Fetch error",a),e.setState({error:"".concat(a)})}))}},{key:"handleSort",value:function(e){var a=this;return function(){var t=a.state.sorting.direction;a.setState({sorting:{column:e,direction:"ascending"===t?"descending":"ascending"}})}}},{key:"handleSearchChanged",value:function(){var e=this;return function(a){var t=a.target.value;clearTimeout(e.searchDebounceTimeout),e.searchDebounceTimeout=setTimeout((function(){e.setState({search:t})}),500)}}},{key:"render",value:function(){return l.a.createElement("div",{className:"App"},l.a.createElement(d.a,null,l.a.createElement(d.a.Column,null,l.a.createElement(h.a,{as:"h1"},"WTG - What the global!"),l.a.createElement("p",null,"A list of all the JS global bindings defined in Firefox WebExtension API modules (the ext-*.js files that provides the APIs implementation code), collected by a small JS script using the babel parsing and traverse utilities."),l.a.createElement("p",null,"Why?"),l.a.createElement("p",null,"All the ext-*.js files are being loaded in a single per-process global, and so it is reasonable to keep a special eye on it."),l.a.createElement("p",null,"Collitions between globals defined in different ext-*.js files may lead to errors (e.g. the same binding defined as a var and then as a const) or unexpected behaviors (e.g. a global function silently override another global function with the same name)."),this.renderMenu(),this.renderTable())))}},{key:"renderMenu",value:function(){return l.a.createElement(f.a,null,l.a.createElement(f.a.Item,null),l.a.createElement(f.a.Item,{position:"right"},l.a.createElement(E.a,{className:"icon",icon:"search",placeholder:"Search...",onChange:this.handleSearchChanged()})))}},{key:"renderTable",value:function(){return l.a.createElement(p.a,{sortable:!0,celled:!0,structured:!0},this.renderTableHeader(),this.renderTableBody())}},{key:"renderTableHeader",value:function(){var e=this.state.sorting,a=e.column,t=e.direction;return l.a.createElement(p.a.Header,null,l.a.createElement(p.a.Row,null,l.a.createElement(p.a.HeaderCell,{rowSpan:"2",sorted:"name"===a?t:void 0,onClick:this.handleSort("name")},"Name"),l.a.createElement(p.a.HeaderCell,{colSpan:"5"},"Where"),l.a.createElement(p.a.HeaderCell,{rowSpan:"2"},"JS Code"),l.a.createElement(p.a.HeaderCell,{rowSpan:"2"},"Filename")),l.a.createElement(p.a.Row,null,l.a.createElement(p.a.HeaderCell,null,"Toolkit"),l.a.createElement(p.a.HeaderCell,null,"Browser"),l.a.createElement(p.a.HeaderCell,null,"Mobile"),l.a.createElement(p.a.HeaderCell,null,"Parent"),l.a.createElement(p.a.HeaderCell,null,"Child")))}},{key:"renderTableBody",value:function(){var e=this.state,a=e.data,t=e.sorting,n=e.search,r=Reflect.ownKeys(a||{}).sort();return"name"===t.column&&"ascending"===t.direction&&(r=r.reverse()),l.a.createElement(p.a.Body,null,r.flatMap((function(e){var t=[],r=a&&a[e]||[],o=0;n&&(r=r.filter((function(a){return!!(e.includes(n)||a.filepath.includes(n)||a.jscode.includes(n))})));var c=!0,i=!1,s=void 0;try{for(var u,m=r[Symbol.iterator]();!(c=(u=m.next()).done);c=!0){var d=u.value,f=d.filepath,E=d.jscode,v=d.metadata;t.push(l.a.createElement(p.a.Row,{key:e+"-"+o++},1===o&&l.a.createElement(p.a.Cell,{rowSpan:r.length},l.a.createElement(g.a,{trigger:l.a.createElement("span",null,e)},l.a.createElement(g.a.Header,null,e),l.a.createElement(g.a.Content,null,l.a.createElement(g.a.Description,null,r.flatMap((function(e){return[l.a.createElement(h.a,null,e.filepath),l.a.createElement("pre",{style:{overflow:"auto"}},e.jscode)]})))))),l.a.createElement(p.a.Cell,null,v.toolkit&&l.a.createElement(b.a,{color:"green",name:"checkmark",size:"small"})),l.a.createElement(p.a.Cell,null,v.browser&&l.a.createElement(b.a,{color:"green",name:"checkmark",size:"small"})),l.a.createElement(p.a.Cell,null,v.mobile&&l.a.createElement(b.a,{color:"green",name:"checkmark",size:"small"})),l.a.createElement(p.a.Cell,null,v.parent&&l.a.createElement(b.a,{color:"green",name:"checkmark",size:"small"})),l.a.createElement(p.a.Cell,null,v.child&&l.a.createElement(b.a,{color:"green",name:"checkmark",size:"small"})),l.a.createElement(p.a.Cell,null,l.a.createElement(g.a,{trigger:l.a.createElement("span",null,E.slice(0,50),E.length>50?"...":"")},l.a.createElement(g.a.Header,null,e),l.a.createElement(g.a.Content,null,l.a.createElement(g.a.Description,null,l.a.createElement(h.a,null,f),l.a.createElement("pre",{style:{overflow:"auto"}},E))))),l.a.createElement(p.a.Cell,null,f)))}}catch(w){i=!0,s=w}finally{try{c||null==m.return||m.return()}finally{if(i)throw s}}return t})))}}]),a}(l.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[210,1,2]]]);
//# sourceMappingURL=main.df095f54.chunk.js.map